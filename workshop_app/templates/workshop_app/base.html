<!DOCTYPE html>
<html>
{% load static %}
{% load custom_filters %}
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>
        {% block title %}
            HomePage
        {% endblock %}
    </title>
    
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&family=Open+Sans:wght@300;400&display=swap" rel="stylesheet">
    
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    
    <script src="{% static 'workshop_app/js/jquery-3.4.1.min.js' %}"></script>
    <script src="{% static 'workshop_app/js/bootstrap.min.js' %}"></script>
    <script src="{% static 'workshop_app/js/popper.min.js' %}"></script>
    <script src="{% static 'workshop_app/js/toastr.min.js' %}"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>

    {% block extra-dependencies %}
    {% endblock %}

    <link rel="stylesheet" href="{% static 'workshop_app/css/bootstrap.min.css' %}">
    <link rel="stylesheet" href="{% static 'workshop_app/css/toastr.min.css' %}">
    <link rel="stylesheet" href="{% static 'workshop_app/css/base.css' %}" type="text/css"/>
    <link rel="stylesheet" href="{% static 'workshop_app/css/font-awesome.css' %}" type="text/css"/>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.css">
    
    {% block extra-custom-scripts %}
    {% endblock %}
    
    <style>
        /* Color Palette & Typography Variables */
        :root {
            --primary-color: #5b46b3; /* Deep Purple */
            --secondary-color: #8E44AD; /* Amethyst */
            --accent-color: #3498DB; /* Peter River Blue */
            --text-dark: #2c3e50; /* Dark Blue-Grey */
            --text-light: #ecf0f1; /* Light Grey */
            --bg-light: #f7f9fc; /* Off-white */
        }
        
        body {
            font-family: 'Open Sans', sans-serif;
            background-color: var(--bg-light);
            color: var(--text-dark);
            margin: 0;
            padding-top: 72px; /* match reduced default navbar height */
        }

        /* Navbar Enhancements */
        .navbar {
            background-color: var(--primary-color) !important;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease-in-out;
            min-height: 64px; /* slightly slimmer before hover */
            padding-top: 0.35rem;
            padding-bottom: 0.35rem;
            flex-wrap: wrap; /* allow description to wrap below */
            display: flex;
            align-items: center; /* vertically center brand and links */
        }
        /* Expanded navbar (on brand hover) */
        .navbar.navbar-expanded {
            background-color: #ffd54f !important; /* yellow */
            min-height: 200px; /* broader when expanded */
            padding-top: 1.25rem;
            padding-bottom: 1.25rem;
        }
        .navbar-brand {
            font-family: 'Montserrat', sans-serif;
            font-weight: 700;
            letter-spacing: 1px;
            font-size: 1.5rem;
            transition: transform 0.3s ease-in-out;
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }
        .navbar-brand:hover {
            transform: scale(1.05);
        }
        .navbar-brand .brand-subtext {
            font-family: 'Open Sans', sans-serif;
            font-weight: 400;
            font-size: 0.75rem;
            line-height: 1.1;
            color: #ecf0f1;
            opacity: 0.85;
            margin-top: 2px;
        }
        .nav-link {
            transition: all 0.3s ease;
            position: relative;
            padding: 10px 16px !important; /* slightly reduced pre-hover size */
            border-radius: 5px;
            margin: 0 5px;
            display: flex;
            align-items: center; /* vertically center link text/icons */
        }
        .nav-link:hover {
            background-color: var(--secondary-color);
            transform: translateY(-2px);
            color: var(--text-light) !important;
        }
        .nav-link::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            display: block;
            background: var(--accent-color);
            transition: width 0.4s ease;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
        }
        .nav-link:hover::after {
            width: 100%;
        }

        /* Navbar description panel (hidden by default, shown when expanded) */
        .navbar-description {
            width: 100%;
            color: #2c3e50;
            font-size: 1.05rem;
            line-height: 1.6;
            overflow: hidden;
            max-height: 0;
            opacity: 0;
            transition: max-height 0.3s ease, opacity 0.3s ease;
            flex: 0 0 100%;
            background: #ffd54f; /* yellow bar below navbar */
            padding: 12px 16px;
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .navbar.navbar-expanded .navbar-description {
            max-height: 360px; /* allow more content when expanded */
            opacity: 1;
            padding-top: 12px;
        }

        /* Dropdown Styling */
        .dropdown-menu {
            background-color: var(--primary-color);
            border: none;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
            animation: fadeIn 0.3s ease-out;
        }
        .dropdown-item {
            color: var(--text-light) !important;
            transition: background-color 0.3s ease;
        }
        .dropdown-item:hover {
            background-color: var(--secondary-color);
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Content Area */
        .base-content {
            background-color: #fff;
            margin: 30px auto;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            max-width: 90%;
            min-height: calc(100vh - 120px);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            animation: slideInUp 0.8s ease-out forwards;
        }
        @keyframes slideInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .base-content h1 {
            color: var(--primary-color);
            font-family: 'Montserrat', sans-serif;
            font-size: 2.5rem;
        }

        /* Footer Styling */
        .footer {
            background-color: var(--text-dark);
            color: var(--text-light);
            padding: 20px 0;
            text-align: center;
        }

        /* Responsive adjustments */
        @media (max-width: 992px) {
            body { padding-top: 64px; }
            .navbar { min-height: 58px; }
            .navbar-brand { font-size: 1.25rem; }
            .nav-link { padding: 8px 12px !important; }
            .base-content { padding: 24px; max-width: 96%; }
            .navbar-description { font-size: 0.95rem; }
        }

        @media (max-width: 768px) {
            body { padding-top: 56px; }
            .navbar { padding-top: 0.25rem; padding-bottom: 0.25rem; }
            .navbar-brand { font-size: 1.1rem; }
            .brand-subtext { font-size: 0.7rem; }
            .nav-link { padding: 8px 10px !important; margin: 0 2px; }
            .base-content { padding: 20px; }
            .navbar-description { padding: 10px 12px; line-height: 1.4; }
            .table, table { font-size: 0.95rem; }
            .table-responsive-wrapper { overflow-x: auto; -webkit-overflow-scrolling: touch; }
        }

        @media (max-width: 576px) {
            .navbar { min-height: 52px; }
            .navbar-brand { font-size: 1rem; }
            .nav-link { padding: 6px 8px !important; }
            .base-content { margin: 16px auto; padding: 16px; }
            .navbar.navbar-expanded { min-height: 160px; }
            .navbar.navbar-expanded .navbar-description { max-height: 280px; }
        }

        /* Global responsive helpers */
        img, video, canvas { max-width: 100%; height: auto; }
        .table-responsive-wrapper { overflow-x: auto; -webkit-overflow-scrolling: touch; }
        .base-content { width: 100%; box-sizing: border-box; }

        /* Make hero sections scale on small screens */
        .image { height: clamp(240px, 40vh, 500px); }
        .imageFont { font-size: clamp(32px, 10vw, 100px); text-align: center; }

        /* Tighter jumbotron on small screens */
        @media (max-width: 768px) {
            .jumbotron { padding: 24px; border-radius: 12px; }
            .jumbotron h1 { font-size: 1.75rem; }
            .jumbotron p { font-size: 1rem; }
        }

        /* Very small phones */
        @media (max-width: 420px) {
            body { padding-top: 52px; }
            .navbar { min-height: 48px; }
            .navbar-brand { font-size: 0.95rem; }
            .navbar-brand .brand-subtext { display: none; }
            .nav-link { padding: 6px 6px !important; font-size: 0.85rem; }
            .base-content { padding: 12px; margin: 12px auto; }
            .image { height: 200px; }
            .imageFont { font-size: 1.5rem; }
            table, .table { font-size: 0.85rem; }
            .table thead th, .table tbody td { padding: 10px; }
            .navbar-description { font-size: 0.85rem; padding: 8px 10px; }
        }
    </style>
</head>

<body>
{% block header %}
    <nav class="navbar navbar-dark navbar-expand-lg bg-primary fixed-top">
        {% if user.is_authenticated %}
        <a class="navbar-brand" id="navbarBrand" href="{% url 'workshop_app:index' %}">
            FOSSEE Workshops
            <span class="brand-subtext">hover to see info</span>
        </a>
        {% else %}
        <a class="navbar-brand" id="navbarBrand" href="{{request.scheme}}://{{request.get_host}}">
            FOSSEE Workshops
            <span class="brand-subtext">hover to see info</span>
        </a>
        {% endif %}
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
                aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item">
                    <a class="nav-link" href="/">Home</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="{% url 'statistics_app:public' %}">Workshop Statistics</a>
                </li>
            </ul>
            {% if user.is_authenticated %}
            <ul class="navbar-nav mr-auto">
                {% if request.user|has_group:"__instructor__" %}
                <li class="nav-item">
                    <a class="nav-link" href="{% url 'statistics_app:team' %}">Team Statistics</a>
                </li>
                {% endif %}
                <li class="nav-item">
                    <a class="nav-link" href="{% url 'workshop_app:workshop_status_instructor' %}">Workshop Status</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="{% url 'workshop_app:propose_workshop' %}">Propose Workshop</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="{% url 'workshop_app:workshop_type_list' %}">Workshop Types</a>
                </li>
            </ul>
            <div class="my-2 my-lg-0">
                <ul class="navbar-nav mr-auto">
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button"
                           data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                           <span class="material-icons" style="vertical-align: middle; margin-right: 5px;">account_circle</span>
                           <span style="display: inline; vertical-align: middle;">{{ user.get_full_name|title }}</span>
                        </a>
                        <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                            <a class="dropdown-item" href="{% url 'workshop_app:view_own_profile' %}">Profile</a>
                            <a class="dropdown-item" href="{% url 'password_change' %}">Change Password</a>
                            <a class="dropdown-item" href="{% url 'workshop_app:logout' %}">Logout</a>
                        </div>
                    </li>
                </ul>
            </div>
            {% endif %}
        </div>
        <!-- Expanding description area (hidden by default) -->
        <div class="navbar-description" id="navbarDescription">
            FOSSEE (Free/Libre and Open Source Software for Education) project promotes the use of FLOSS tools to improve the quality of education in our country. We aim to reduce dependency on proprietary software in educational institutions. We encourage the use of FLOSS tools through various activities to ensure commercial software is replaced by equivalent FLOSS tools. We also develop new FLOSS tools and upgrade existing tools to meet requirements in academia and research. The FOSSEE project is part of the National Mission on Education through Information and Communication Technology (ICT), Ministry of Education (MoE), Government of India.
        </div>
    </nav>
{% endblock %}

<div class="base-content">
    {% block content %}
        <h1>Welcome to FOSSEE Workshops!</h1>
        <p>A platform for learning and collaborating on open-source software.</p>
    {% endblock %}
</div>

<script>
    // Expand/collapse navbar on brand hover
    (function() {
        var brand = document.getElementById('navbarBrand');
        var navbar = document.querySelector('.navbar');
        if (brand && navbar) {
            var addExpanded = function() { navbar.classList.add('navbar-expanded'); };
            var removeExpanded = function() { navbar.classList.remove('navbar-expanded'); };
            brand.addEventListener('mouseenter', addExpanded);
            brand.addEventListener('focus', addExpanded);
            navbar.addEventListener('mouseleave', removeExpanded);
        }
    })();
</script>
{% if messages %}
<script>
    {% for message in messages %}
        toastr[{% if message.tags %} "{{ message.tags }}" {% else %} "info" {% endif %}]("{{ message }}");
    {% endfor %}
</script>
{% endif %}

</body>
<footer class="footer">
    {% block footer %}
       <div class="container1">
           Developed by FOSSEE group, IIT Bombay
       </div> 
    {% endblock %}
</footer>
</html>